<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:task="http://www.springframework.org/schema/task"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
       http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task.xsd">


    <context:component-scan base-package="com.sinochem.yunlian"/>
    <!-- Enables the Spring Task @Scheduled programming model -->
    <task:executor id="executor" pool-size="5"/>
    <task:scheduler id="scheduler" pool-size="10"/>
    <task:annotation-driven executor="executor" scheduler="scheduler"/>
    <bean id="configProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
       <property name="locations">
           <list>
               <value>classpath:/*.properties</value>
           </list>
       </property>
   </bean>
    <!--
  <bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PreferencesPlaceholderConfigurer">
       <property name="properties" ref="configProperties"/>
   </bean>-->
    <bean id="upmAuthService" class="com.sinochem.yunlian.upm.tools.UpmAuthService">
        <property name="authUrl" value="${upm_host}"/>
        <property name="clientId" value="sso"/>
        <property name="secret" value="${sso.secret}"/>
    </bean>

    <bean id="redisUtil" class="com.sinochem.yunlian.upm.sso.cache.RedisUtil">
        <property name="maxIdle" value="${redis.pool.maxIdle}"/>
        <property name="maxTotal" value="${redis.pool.maxActive}" />
        <property name="maxWaitMillis" value="${redis.pool.maxWaitMillis}"/>
        <property name="serverHosts" value="${redis.server.host}"/>
        <property name="masterName" value="${redis.masterName}"/>
        <property name="password" value="${redis.pool.password}"/>
    </bean>

    <bean id="smsService" class="com.sinochem.yunlian.upm.sso.service.SMSService">
        <property name="smsUrl" value="${smsUrl}"/>
    </bean>

    <bean id="idGenerator" class="com.sinochem.yunlian.upm.sso.util.IdGenerator">
        <property name="redisUtil">
           <ref bean="redisUtil"/>
        </property>
    </bean>
</beans>
